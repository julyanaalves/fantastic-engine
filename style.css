* {box-sizing: border-box; }
html, body { margin:0; padding:0; height:100%; font-family: 'Segoe UI', Arial, sans-serif; background:#f4f7fb; color:#1f2a33; user-select:none; }
body { -webkit-font-smoothing: antialiased; }
#container { position:relative; width:100%; height:100%; overflow:hidden; }
canvas { display:block; outline:none; position:absolute; inset:0; z-index:0; }
#overlay { position:absolute; top:16px; left:50%; transform:translateX(-50%); text-align:center; pointer-events:none; display:flex; flex-direction:column; align-items:center; gap:8px; z-index:2; }
#overlay h1 { margin:0 0 4px; font-size: clamp(1.4rem, 2.5vw, 2.2rem); letter-spacing:1px; background: linear-gradient(90deg,#0064d6,#b000b5); background-clip:text; -webkit-background-clip:text; color:transparent; }
#overlay .hint { margin:0; font-size: clamp(.75rem,1.2vw,.95rem); opacity:.8; max-width:680px; line-height:1.3; background:rgba(0,0,0,0.03); padding:6px 12px; border-radius:8px; }
.message-final { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:32px; text-align:center; font-size:clamp(1rem,2vw,1.3rem); line-height:1.4; opacity:0; transition: opacity 1.0s ease; background: radial-gradient(circle at center, rgba(255,255,255,0.6), rgba(255,255,255,0.85)); backdrop-filter: blur(6px); color:#1d2730; }
.message-final.visible { opacity:1; }
.bad-collision { animation: flash .4s ease; }
@keyframes flash { 0%{ background:#ff9fb5; } 100%{ background:#f4f7fb; } }
#timer { position:absolute; top:12px; left:14px; font-family:monospace; font-size: clamp(1rem,1.8vw,1.2rem); padding:6px 10px; background:rgba(255,255,255,0.85); border:1px solid rgba(0,0,0,0.1); border-radius:8px; letter-spacing:1px; color:#19394d; box-shadow:0 2px 8px -2px rgba(0,0,0,0.15); backdrop-filter: blur(4px); z-index:3; }
#timer.danger { color:#b4002e; animation: pulse 1s ease-in-out infinite; }
@keyframes pulse { 0%,100%{ transform:scale(1); } 50%{ transform:scale(1.08); } }
#undoBtn { position:absolute; bottom:14px; left:14px; background:linear-gradient(135deg,#ffffff,#e2e8ef); color:#1f2a33; border:1px solid rgba(0,0,0,0.15); padding:8px 14px; border-radius:8px; font-size:.85rem; cursor:pointer; letter-spacing:.5px; font-weight:600; box-shadow:0 4px 10px -4px rgba(0,0,0,0.25); z-index:3; pointer-events:auto; }
#undoBtn:hover { background:linear-gradient(135deg,#ffffff,#d6dde4); }
#undoBtn:active { transform:translateY(1px); }
#undoBtn:disabled { opacity:.35; cursor:default; }
#timeBarWrap { position:relative; top:0; left:0; transform:none; width:min(600px,60vw); height:12px; background:rgba(0,0,0,0.08); border-radius:8px; overflow:hidden; box-shadow: inset 0 0 0 1px rgba(0,0,0,0.05); z-index:2; }
#timeBar { height:100%; width:100%; background:linear-gradient(90deg,#1d8bff,#ff4dbd); transform-origin:left center; transition: width .25s linear; }
#timeBarWrap.danger #timeBar { background:linear-gradient(90deg,#ff3d55,#ffb347); }

/* Tela inicial */
#startScreen { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; padding:32px; z-index:10; background:linear-gradient(135deg,#e1f0ff,#f5ecff); }
#startScreen .panel { max-width:740px; width:100%; background:rgba(255,255,255,0.85); backdrop-filter:blur(10px); border:1px solid rgba(0,0,0,0.08); border-radius:22px; padding:40px 48px 48px; box-shadow:0 12px 40px -12px rgba(0,40,90,0.25); display:flex; flex-direction:column; gap:18px; animation: floatIn .7s ease; }
#startScreen h1 { margin:0; font-size:clamp(1.9rem,4vw,3rem); background:linear-gradient(90deg,#0064d6,#b000b5); background-clip:text; -webkit-background-clip:text; color:transparent; letter-spacing:1px; text-align:center; }
#startScreen .intro { margin:0; font-size:clamp(.95rem,1.4vw,1.15rem); line-height:1.4; text-align:center; }
#startScreen .rules { margin:0; padding-left:20px; font-size:clamp(.85rem,1.2vw,1rem); line-height:1.35; display:flex; flex-direction:column; gap:6px; }
#startScreen .rules li { list-style:disc; }
#startScreen button#startBtn { align-self:center; padding:14px 38px; font-size:clamp(.9rem,1.1vw,1.05rem); font-weight:600; letter-spacing:.5px; border-radius:14px; border:1px solid rgba(0,0,0,0.15); cursor:pointer; background:linear-gradient(135deg,#1d8bff,#7a35ff); color:#fff; box-shadow:0 6px 20px -6px rgba(0,0,0,0.35); transition:transform .25s, box-shadow .25s, filter .25s; }
#startScreen button#startBtn:hover { transform:translateY(-3px); box-shadow:0 10px 28px -10px rgba(0,0,0,0.45); }
#startScreen button#startBtn:active { transform:translateY(-1px); filter:brightness(.9); }
#startScreen .note { text-align:center; opacity:.7; font-size:.75rem; }
@keyframes floatIn { 0%{ transform:translateY(25px); opacity:0; } 100%{ transform:translateY(0); opacity:1; } }

#startScreen.hidden { animation: fadeOut .45s ease forwards; pointer-events:none; }
@keyframes fadeOut { to { opacity:0; transform:scale(.98); } }

/* Botão próxima fase e elementos dos novos níveis */
.message-final button.nextBtn { padding:14px 34px; font-size:clamp(.85rem,1vw,1rem); font-weight:600; background:linear-gradient(135deg,#1d8bff,#7a35ff); color:#fff; border:1px solid rgba(0,0,0,0.2); border-radius:14px; cursor:pointer; box-shadow:0 6px 18px -6px rgba(0,0,0,0.4); letter-spacing:.5px; }
.message-final button.nextBtn:hover { filter:brightness(1.08); }
.message-final button.nextBtn:active { transform:translateY(1px); }

/* Ajuste responsivo para zonas do nível 2 (texto símbolo) */
@media (max-width:700px){
	#startScreen .panel { padding:32px 32px 40px; }
	.message-final { font-size:clamp(.95rem,2.4vw,1.15rem); }
}
